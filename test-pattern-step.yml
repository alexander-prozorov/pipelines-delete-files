parameters:
- name: 'pattern'
  type: string
- name: 'files'
  type: string

steps:
- task: DeleteFiles@1
  inputs:
    SourceFolder: $(Build.SourcesDirectory)/files
    Contents: ${{ parameters.pattern }}
- task: Bash@3
  inputs:
    targetType: 'inline'
    script: |
      existing=$(find files -type f | xargs)
      if [ "$existing" != ${{ parameters.files }} ]; then
        echo "Existing fles: $existing, expected: ${{ parameters.files }}"; exit 1;
      fi 
